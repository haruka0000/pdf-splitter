<html>
<head>
    <meta charset="UTF-8">
    <title>Eel</title>
</head>
<body>
    <button id="pdf_path" name="pdf_path" onclick="getFolder()">Import PDF</button>
    <!--テーブル生成位置-->
    <div id ='maintable'></div>

    <!-- Python用 -->
    <script type="text/javascript" src="/eel.js"></script>
    
    <script type="text/javascript">
        var pdf_path = "";
        var table = document.createElement('table');
        table.id = "table";

        // 生成したtable要素を追加する
        document.getElementById('maintable').appendChild(table);

        async function run() {
            table.innerHTML = ''
            let data = await eel.get_table_data(pdf_path)();
            console.log(data)
            // tr部分のループ
            for (var i = 0; i < data.length; i++) {
                // tr要素を生成
                var tr = document.createElement('tr');

                // th・td部分のループ
                for (var j = 0; j < data[i].length; j++) {
                    // 1行目のtr要素の時
                    if(i === 0) {
                        var th = document.createElement('th');
                        th.textContent = data[i][j];
                        tr.appendChild(th)
                    } else{
                        var td = document.createElement('td');
                        td.textContent = data[i][j];
                        tr.appendChild(td) 
                    }
                }
                // tr要素をtable要素の子要素に追加
                table.appendChild(tr);
            }
        }
        
        // SUBMITされたとき
        async function getFolder() {
            // ファイル入力
            pdf_path = await eel.btn_ResimyoluClick()();
            // 再描画
            run();
        }
    </script>
</body>
</html>
